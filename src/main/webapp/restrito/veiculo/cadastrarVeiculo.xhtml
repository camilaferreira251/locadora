<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">
    <ui:decorate template="/publico/template.xhtml">
        <ui:define name="centro">
            <h:form id="frmGeral">
                <p:growl
                sticky="false"
                showDetail="true"/>

                <h:inputHidden value="#{veiculoBean.veiculo.id}"/>
                
                <p:fieldset legend="Controle de Veículos" toggleable="true">
                        <p:messages id="messages" />

                        <h:panelGrid columns="2" id="pnDvds"
                                style="font-family: Verdana, Arial; font-weight: bold;">
                                <h:outputLabel id="lbPlaca" value="*Placa:" for="placa"
                                        style="float: right;" />
                                <p:inputText id="placa" size="20" value="#{veiculoBean.veiculo.placa}"
                                        required="true" requiredMessage="Campo [Titulo] � obrigat�rio." />

                                <h:outputLabel id="lbModelo" value="*Modelo:" for="modelo"
                                        style="float: right;" />
                                <p:inputText id="modelo" size="20" value="#{veiculoBean.veiculo.modelo}"
                                        required="true" requiredMessage="Campo [Ano] é obrigat�rio."
                                        validatorMessage="Campo [Ano] possui erros. Verifique.">
                                        <!--<f:validateLongRange minimum="1900" maximum="2012" />-->
                                </p:inputText>
                                
                                <h:outputLabel id="lbAno" value="*Ano" for="ano"
                                        style="float: right;" />
                                <p:inputText id="ano" size="20" value="#{veiculoBean.veiculo.ano}"
                                        required="true" requiredMessage="Campo [Ano] é obrigat�rio."
                                        validatorMessage="Campo [Ano] possui erros. Verifique.">
                                        <!--<f:validateLongRange minimum="1900" maximum="2012" />-->
                                </p:inputText>

                                <h:outputLabel id="lbMarca" value="*Marca:" for="marca"
                                        style="float: right;" />
                                <p:inputText id="marca" size="20" value="#{veiculoBean.veiculo.marca}"
                                        required="true" requiredMessage="Campo [Ano] é obrigat�rio."
                                        validatorMessage="Campo [Ano] possui erros. Verifique.">
                                        <!--<f:validateLongRange minimum="1900" maximum="2012" />-->
                                </p:inputText>

                                <h:outputLabel id="lbCor" value="*Cor:" for="cor"
                                        style="float: right;" />
                                <p:inputText id="cor" size="15" value="#{veiculoBean.veiculo.cor}"
                                        required="true" requiredMessage="Campo [Ano] é obrigat�rio."
                                        validatorMessage="Campo [Ano] possui erros. Verifique.">
                                        <!--<f:validateLongRange minimum="1900" maximum="2012" />-->
                                </p:inputText>

                                <h:outputLabel id="lbPreco" value="*Valor diária (R$):" for="preco"
                                        style="float: right;" />
                                <p:inputText id="preco" size="10" value="#{veiculoBean.veiculo.valorDiaria}"
                                        required="true" requiredMessage="Campo [Pre�o] � obrigat�rio."
                                        validatorMessage="Campo [Preço] possui erros. Verifique.">
                                        <!--<f:validateDoubleRange minimum="1" />-->
                                </p:inputText>
                        </h:panelGrid>

                        <center>
                                <h:panelGrid columns="3"
                                        style="font-size: 12px; font-weight: bold;">
                                    <p:commandButton value="Adicionar Veículo" action="#{veiculoBean.salvar()}"
                                                update="frmGeral, messages, dtDVDs" />

                                    <p:commandButton value="Alterar Veículo" action="#{veiculoBean.alterar()}"
                                                update="frmGeral, messages, dtDVDs" />
                                </h:panelGrid>
                        </center>

                        <p:spacer height="10" />

                        <p:dataTable id="dtDVDs" emptyMessage="Nenhum registro encontrado."
                                     value="#{veiculoBean.veiculos}" var="v"
                                style="text-align: center; font-weight: bold;">
                                <f:facet name="header">
                                        <h:outputText value="Registro de veículos" />
                                </f:facet>

                                <p:column id="tituloColumn" filterBy="#{v.marca}"
                                        headerText="Filtrar por marca" filterMatchMode="contains">
                                        <f:facet name="header">
                                                <h:outputText value="Marca" />
                                        </f:facet>
                                        <h:outputText value="#{d.marca}" />
                                </p:column>

                                <p:column>
                                        <f:facet name="header">
                                                <h:outputText value="Modelo" />
                                        </f:facet>
                                        <h:outputText value="#{v.modelo}" />
                                </p:column>

                                <p:column>
                                        <f:facet name="header">
                                                <h:outputText value="Ano" />
                                        </f:facet>
                                        <h:outputText value="#{v.ano}" />
                                </p:column>

                                <p:column>
                                        <f:facet name="header">
                                                <h:outputText value="Placa" />
                                        </f:facet>
                                        <h:outputText value="#{v.placa}" />
                                </p:column>

                                <p:column>
                                        <f:facet name="header">
                                                <h:outputText value="Cor" />
                                        </f:facet>
                                        <h:outputText value="#{v.cor}" />
                                </p:column>

                                <p:column
                                        rendered="#{facesContext.externalContext.isUserInRole('ROLE_ADMIN')}">
                                        <f:facet name="header">
                                                <h:outputText value="Remover" />
                                        </f:facet>
                                        <f:ajax event="click" render="@form"
                                                listener="#{veiculoBean.excluir()}">
                                                <h:commandLink value="Remover" />
                                        </f:ajax>
                                </p:column>

                                <p:column
                                        rendered="#{facesContext.externalContext.isUserInRole('ROLE_ADMIN')}">
                                        <f:facet name="header">
                                                <h:outputText value="Alterar" />
                                        </f:facet>
                                        <h:commandLink value="Alterar">
                                            <p:ajax event="click" listener="#{veiculoBean.alterar()}"
                                                        update="@form" />
                                        </h:commandLink>
                                </p:column>

                                <f:facet name="footer">
                                        <h:outputText
                                            value="Há um total de #{veiculoBean.veiculos.size()} veículo(s) cadastrado(s) no sistema." />
                                </f:facet>
                        </p:dataTable>
                </p:fieldset>
            </h:form>

		<p:dialog modal="true" widgetVar="cadGenero" showEffect="slide"
			hideEffect="explode" resizable="false" width="280"
			header="Cadastrar novo genero de DVDs">
			<h:form id="frmGenero">
				<p:growl id="msgGenero" />

				<h:panelGrid columns="2">
					<h:outputLabel id="lbNome" value="Nome:" for="nome"
						style="float: right;" />
					<p:inputText id="nome" size="20" value="#{generoBean.genero.nome}"
						required="true" requiredMessage="Campo [Nome] � obrigat�rio." />

					<p:commandButton value="Salvar" action="#{generoBean.save()}"
						update="msgGenero, frmGenero, frmGeral"
						oncomplete="cadGenero.hide()" />
				</h:panelGrid>

			</h:form>
		</p:dialog>
        </ui:define>
    </ui:decorate>
</html>